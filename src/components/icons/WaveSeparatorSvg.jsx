import Rainbow from 'rainbowvis.js';


export default function WaveSeparatorSvg({ startColor, endColor, opacity, ...otherProps }) {

  function formatColor(color) {
    const rgbToHex = (r, g, b) => {
      const componentToHex = (c) => {
        var hex = c.toString(16);
        return hex.length === 1 ? "0" + hex : hex;
      }

      return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
    }

    if (color.includes('rgb')) {
      const regEx = /\(([^)]+)\)/;
      const matches = regEx.exec(color);

      const [r, g, b] = matches[1].split(',')
      color = rgbToHex(Number(r), Number(g), Number(b))
    }

    return color;
  }
  
  startColor = formatColor(startColor);
  endColor = formatColor(endColor);

  let colorGradient = new Rainbow();
  colorGradient.setNumberRange(0, 3);
  colorGradient.setSpectrum(startColor, endColor);

  return (
    <svg {...otherProps} style={{opacity: opacity}} viewBox="0 445 900 140" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" version="1.1">
      <path  fill={'#' + colorGradient.colorAt(0)} d="M0 483L15 481.8C30 480.7 60 478.3 90 473C120 467.7 150 459.3 180 460C210 460.7 240 470.3 270 476.8C300 483.3 330 486.7 360 484.5C390 482.3 420 474.7 450 477.3C480 480 510 493 540 499C570 505 600 504 630 502.2C660 500.3 690 497.7 720 493.8C750 490 780 485 810 478.3C840 471.7 870 463.3 885 459.2L900 455L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z">
      </path>
      <path  fill={'#' + colorGradient.colorAt(1)} d="M0 502L15 504.5C30 507 60 512 90 510.3C120 508.7 150 500.3 180 497.2C210 494 240 496 270 501C300 506 330 514 360 514C390 514 420 506 450 508.2C480 510.3 510 522.7 540 528.8C570 535 600 535 630 531.7C660 528.3 690 521.7 720 520.5C750 519.3 780 523.7 810 520C840 516.3 870 504.7 885 498.8L900 493L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z">
      </path>
      <path  fill={'#' + colorGradient.colorAt(2)} d="M0 534L15 531.2C30 528.3 60 522.7 90 522.2C120 521.7 150 526.3 180 530.5C210 534.7 240 538.3 270 539.8C300 541.3 330 540.7 360 542.7C390 544.7 420 549.3 450 552.2C480 555 510 556 540 552.8C570 549.7 600 542.3 630 542C660 541.7 690 548.3 720 547.8C750 547.3 780 539.7 810 539.5C840 539.3 870 546.7 885 550.3L900 554L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z">
      </path>
      <path  fill={'#' + colorGradient.colorAt(3)} d="M0 576L15 575.5C30 575 60 574 90 572.5C120 571 150 569 180 568.7C210 568.3 240 569.7 270 569.2C300 568.7 330 566.3 360 563C390 559.7 420 555.3 450 557.8C480 560.3 510 569.7 540 571.3C570 573 600 567 630 567.2C660 567.3 690 573.7 720 574C750 574.3 780 568.7 810 564.2C840 559.7 870 556.3 885 554.7L900 553L900 601L885 601C870 601 840 601 810 601C780 601 750 601 720 601C690 601 660 601 630 601C600 601 570 601 540 601C510 601 480 601 450 601C420 601 390 601 360 601C330 601 300 601 270 601C240 601 210 601 180 601C150 601 120 601 90 601C60 601 30 601 15 601L0 601Z">
      </path>
    </svg>
  );
}